<input id=I value=(y**2+x**2)/99><p><canvas id=a>
<script>
c=a.getContext`2d`;
w = 0;
v=(x,y,r)=>{with(Math){p=atan2(y,x)+r;d=hypot(y,x);return[sin(p)*d,cos(p)*d]}}
v=(x,y,r)=>(p=Math.atan2(y,x)+r,d=Math.hypot(y,x),[Math.sin(p)*d,Math.cos(p)*d])
v=(x,y,r)=>(d=(y*y+x*x)**.5,[Math.sin(p=Math.atan2(y,x)+r)*d,Math.cos(p)*d])
v=(x,y,r)=>[Math.sin(p=Math.atan2(y,x)+r)*(d=(y*y+x*x)**.5),Math.cos(p)*d]

f=(X,Y)=>(
      x = X * 5 - 90,
      y = Y * 5 - 90,
      eval(I.value),
      [x,y]=v(x,y,w),
      [z,y]=v(z,y,1),
      y+=250,
      [250+x/y*250, 250+z/y*250]
    )

if(location.hash)I.value=atob(location.hash.slice(1));
setInterval(`
  a.height=a.width=500;
  w += .02
  for(X = 38; --X;)
    for(Y = 37; --Y;)
      c.moveTo(...f(X,Y)),c.lineTo(...f(X,Y+1)),
      c.moveTo(...f(Y,X)),c.lineTo(...f(Y+1,X))
c.stroke();
  location.hash=btoa(I.value);
`, 33);
</script>
