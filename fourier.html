<canvas id=c style=width:95%><script>
D=g=>A.map(j=>g.reduce((t,v,k)=>t+v*Math.cos(6.283*j*k/S),0))
I=new Image()
I.onload=_=>{
S=c.height=I.width
c.width=S+S
x=c.getContext`2d`
x.drawImage(I,0,0)
A=[...Array(S).keys()]
e=x.getImageData(m=0,0,S,S)
f=A.map(i=>A.map(j=>e.data[(i*S+j)*4])).map(D)
A.map(i=>f.map(g=>g[i])).map(D)
.map(g=>g.map(h=>(h=(h**2)**.15,m<h?m=h:h)))
.map((g,i)=>g.map((h,j)=>x.fillRect(i+S,j,1,1-h/m)))}
I.src='images/circle.png'</script>
