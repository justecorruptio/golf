<canvas id=c style=width:95%><script>
D=g=>A.map(j=>g.reduce((t,v,k)=>t+v*Math.cos(6.283*j*k/S),0))
S=c.height=256
c.width=S+S
x=c.getContext`2d`
x.arc(S/2,S/2,12,0,7);x.fill()
A=[...Array(S).keys()]
e=x.getImageData(m=0,0,S,S)
f=A.map(i=>A.map(j=>e.data[(i*S+j)*4+3])).map(D)
A.map(i=>f.map(g=>g[i])).map(D)
.map(g=>g.map(h=>(h=(h*h)**.1,m<h?m=h:h)))
.map((g,i)=>g.map((h,j)=>x.fillRect(i+S,j,1,h/m)))
</script>
